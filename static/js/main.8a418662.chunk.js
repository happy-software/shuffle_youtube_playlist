(this.webpackJsonpshuffle_youtube_playlist=this.webpackJsonpshuffle_youtube_playlist||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(36),a=n.n(i),s=(n(49),n(50),n(15)),o=n(2),l=n(11),u=n(4),d=n(12),j=n.n(d),b="https://happy-youtube-watcher.herokuapp.com",h={APIEndpoints:{SHUFFLE:b+"/shuffle",TRACKED_PLAYLISTS:b+"/tracked-playlists",TRACKED_VIDEOS:b+"/videos"}},f=n(0);var p=function(e){return Object(f.jsx)("button",{className:"".concat(e.className).concat(e.toggled?" toggled":""),onClick:function(){return e.setToggled(!e.toggled)},children:e.message})};var O=function(e){return Object(f.jsx)("div",{className:"buttonList",children:Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:e.pickNextVideo,className:"buttonListButton nextVideoButton",children:"Next Video"}),Object(f.jsx)(p,{toggled:e.repeatVideo,setToggled:e.setRepeatVideo,message:"Repeat Video",className:"buttonListButton"}),Object(f.jsx)(p,{toggled:e.hideVideo,setToggled:e.setHideVideo,message:e.hideVideo?"Show Video":"Hide Video",className:"buttonListButton"}),Object(f.jsx)(s.b,{to:"/track-new-playlist",className:"link",children:Object(f.jsx)("button",{type:"button",className:"buttonListButton",children:"Track New Playlist"})}),Object(f.jsx)(s.b,{to:"/search",target:"_blank",rel:"noopener noreferrer",className:"link",children:Object(f.jsx)("button",{type:"button",className:"buttonListButton",children:"Search"})})]})})};var v=function(e){return Object(f.jsxs)("div",{className:"loader",children:[Object(f.jsx)("svg",{width:"50",height:"50",viewBox:"0 0 50 50",children:Object(f.jsx)("path",{fill:"#c779d0",d:"M25,5A20.14,20.14,0,0,1,45,22.88a2.51,2.51,0,0,0,2.49,2.26h0A2.52,2.52,0,0,0,50,22.33a25.14,25.14,0,0,0-50,0,2.52,2.52,0,0,0,2.5,2.81h0A2.51,2.51,0,0,0,5,22.88,20.14,20.14,0,0,1,25,5Z",children:Object(f.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.5s",repeatCount:"indefinite"})})}),Object(f.jsx)("div",{children:"Give me a minute to wake up... so sleepy..."})]})},x=n(38),m=n.n(x);var y=function(e){return Object(f.jsx)("div",{style:{display:e.hideVideo?"none":"block"},children:Object(f.jsx)(m.a,{url:"https://www.youtube.com/watch?v=".concat(e.videoId),controls:!0,loop:e.repeatVideo,onReady:function(e){},onEnded:function(){return e.onEnd()},onError:function(){return console.log("BROKEN VIDEO: ".concat(JSON.stringify(e.videoId,null,2))),void e.onEnd()},playing:!0,width:"100%",height:"800px",config:{youtube:{playerVars:{},embedOptions:{host:"https://www.youtube-nocookie.com"}},attributes:{},tracks:[]}})})};var g=function(e){return Object(f.jsx)("div",{className:"playlistSelectorItem",children:Object(f.jsxs)("label",{className:"checkbox_label",children:[Object(f.jsx)("input",{type:"checkbox",value:e.value,checked:e.checked,onChange:function(){return e.onCheckboxChange(e.value)},className:"checkbox_input"}),e.label]})})};var S=function(e){return Object(f.jsxs)("div",{id:"playlistSelector",className:"playlistSelector",children:[Object(f.jsx)("div",{className:"playlistSelectorTitle",children:"Available Playlists"}),Object(f.jsx)("div",{className:"playlistSelectorInner",children:e.playlists.map((function(t){return Object(f.jsx)(g,{label:t.name,value:t.playlist_id,checked:t.is_default,onCheckboxChange:function(t){return e.onCheckboxChange(t)}},t.playlist_id)}))}),Object(f.jsx)("button",{onClick:function(){return e.onShuffle()},className:"playlistSelectorButton",children:"Combine Playlists"}),Object(f.jsx)("button",{onClick:function(){return e.onSelectNone()},className:"playlistSelectorButton",children:"Select None"})]})};var C=function(e){var t=e.video,n=e.onVideoClicked,c=e.className;return Object(f.jsxs)("div",{id:"videoTitleDisplay",onClick:function(){return n(t)},className:"".concat(c),children:[Object(f.jsx)("div",{style:{flex:1},children:t.title}),Object(f.jsx)("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(t.videoId),target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})})]})};var _=function(e){var t=e.videos,n=e.onVideoClicked,r=e.isCollapsedDefault,i=Object(c.useState)(r),a=Object(u.a)(i,2),s=a[0],o=a[1],l=t.slice().reverse();return Object(f.jsxs)("div",{className:"videoPool",children:[Object(f.jsx)("div",{className:"videoPoolTitle",onClick:function(){return o(!s)},children:"Video History (Expand/Collapse)"}),Object(f.jsx)("div",{className:"videoPoolList ".concat(s?"hide":""),children:l.map((function(e,t){return Object(f.jsx)(C,{video:e,onVideoClicked:n,className:"videoPoolItem"},t)}))})]})};var k=function(e){var t=Object(c.useState)(!0),n=Object(u.a)(t,2),r=n[0],i=n[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{id:"videoTitleDisplay",className:"currentVideoTitle contentRow",onClick:function(){return i(!r)},children:[Object(f.jsx)("div",{style:{flex:1},children:e.currentVideo.title}),Object(f.jsx)("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.currentVideo.video_id),target:"_blank",rel:"noopener noreferrer",children:Object(f.jsx)("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})})]}),Object(f.jsx)("div",{className:"contentRow",children:Object(f.jsx)("div",{className:"".concat(r?"hide":""),children:e.currentVideo.description})})]})},N=n(23),E=n.n(N),w=n(39),V={videos:[],isLoaded:!1,error:null,isError:!1},I=function(e,t){switch(t.type){case"FETCH_INIT":return V;case"FETCH_SUCCESS":return Object(l.a)(Object(l.a)({},V),{},{videos:t.data.songs,isLoaded:!0});case"FETCH_FAILURE":var n=Object(l.a)(Object(l.a)({},V),{},{error:t.error,isError:!0});return console.log("Error encountered during video fetch"),console.log(n.error),n;default:throw new Error("Unhandled event type: ".concat(t.type))}},L=function(){var e=Object(w.a)(E.a.mark((function e(t,n,c,r){var i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"FETCH_INIT"}),e.prev=1,e.next=4,j.a.post(t,n);case 4:if(i=e.sent,!r){e.next=7;break}return e.abrupt("return");case 7:c({type:"FETCH_SUCCESS",data:i.data}),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(1),!r){e.next=14;break}return e.abrupt("return");case 14:c({type:"FETCH_FAILURE",error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,c,r){return e.apply(this,arguments)}}();var T=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)({}),a=Object(u.a)(i,2),s=a[0],o=a[1],d=Object(c.useState)([]),b=Object(u.a)(d,2),p=b[0],x=b[1],m=Object(c.useState)(!1),g=Object(u.a)(m,2),C=g[0],N=g[1],E=Object(c.useState)(!0),w=Object(u.a)(E,2),T=w[0],A=w[1],P=Object(c.useState)([]),R=Object(u.a)(P,2),D=R[0],F=R[1],H=function(e){var t=Object(c.useState)(e),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(c.useReducer)(I,V),s=Object(u.a)(a,2),o=s[0],l=s[1];return Object(c.useEffect)((function(){var e=!1;return L(h.APIEndpoints.SHUFFLE,{playlist_ids:r},l,e),function(){return e=!0}}),[r]),[o,i]}(D),B=Object(u.a)(H,2),K=B[0],U=B[1];function Y(){if(K.isLoaded){var e,t,n=(e=0,t=K.videos.length,Math.floor(Math.random()*(t-e))+e);M(K.videos[n])}}function M(e){o(e),x((function(t){return t.concat(e)}))}return Object(c.useEffect)((function(){j.a.get(h.APIEndpoints.TRACKED_PLAYLISTS).then((function(e){return r(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked playlists! ".concat(e))}))}),[]),Object(c.useEffect)(Y,[K]),K.isLoaded?Object(f.jsxs)("div",{children:[Object(f.jsx)(y,{videoId:s.video_id,onEnd:function(){return Y()},repeatVideo:C,hideVideo:T}),Object(f.jsx)(k,{currentVideo:s}),Object(f.jsxs)("div",{className:"contentRow",children:[Object(f.jsx)(S,{playlists:n,onCheckboxChange:function(e){return function(e){var t=n.map((function(t){return t.playlist_id===e?Object(l.a)(Object(l.a)({},t),{},{is_default:!t.is_default}):t})),c=t.filter((function(e){return e.is_default})).map((function(e){return e.playlist_id}));F(c),r(t)}(e)},onShuffle:function(){return U(D)},onSelectNone:function(){return function(){var e=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{is_default:!1})}));F([]),r(e)}()},className:"playlistSelector"}),Object(f.jsx)(_,{videos:p,isCollapsedDefault:!1,onVideoClicked:function(e){return M(e)}}),Object(f.jsx)(O,{repeatVideo:C,setRepeatVideo:N,hideVideo:T,setHideVideo:A,pickNextVideo:function(){return Y()}})]})]}):Object(f.jsx)(v,{})},A=n(17),P=n(40),R=n(41),D=n(16),F=n(44),H=n(43),B=function(e){Object(F.a)(n,e);var t=Object(H.a)(n);function n(e){var c;return Object(P.a)(this,n),(c=t.call(this,e)).state={playlist_id:"",is_default:!0,server_errors:[],redirect_home:!1},c.handleInputChange=c.handleInputChange.bind(Object(D.a)(c)),c.handleSubmit=c.handleSubmit.bind(Object(D.a)(c)),c}return Object(R.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="is_default"===t.name?t.checked:t.value,c=t.name;this.setState(Object(A.a)({},c,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({server_errors:[]}),j.a.post(h.APIEndpoints.TRACKED_PLAYLISTS,{playlist_id:this.state.playlist_id,is_default:this.state.is_default}).then((function(e){e.status>=200&&e.status<300&&t.setState({redirect_home:!0})})).catch((function(e){return t.setState({server_errors:[e],redirect_home:!1})}))}},{key:"render",value:function(){return this.state.redirect_home?Object(f.jsx)(o.a,{to:"/"}):Object(f.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(f.jsx)("label",{children:"Playlist ID: "}),Object(f.jsx)("input",{type:"text",name:"playlist_id",value:this.state.playlist_id,onChange:this.handleInputChange,placeholder:"(e.g. 'PL8g7AzKjYPsNWX5N1pYudn2OetM85N0GS')",style:{width:"40%"}}),Object(f.jsx)("label",{children:" Default Playlist? "}),Object(f.jsx)("input",{type:"checkbox",name:"is_default",checked:this.state.is_default,onChange:this.handleInputChange}),Object(f.jsx)("p",{children:Object(f.jsx)("input",{type:"submit",value:"Submit"})}),Object(f.jsxs)("div",{style:{marginTop:"25px"},className:"".concat(this.state.server_errors.length>0?"":"hide"),children:["Submission Errors: ",this.state.server_errors.map((function(e,t){return Object(f.jsx)("li",{children:e.response.data.errors},t)}))]})]})}}]),n}(r.a.Component);var K=function(e){return Object(f.jsx)("h1",{children:"Playlists Manager"})},U=n(42),Y=n.n(U),M=function(e){return Object(f.jsxs)("div",{className:"list",children:[Object(f.jsx)("div",{className:"list-header"}),Object(f.jsx)("div",{className:"list-body",children:(t=e.queryString,n=e.list,n.filter((function(e){return function(e,t){if(""===t)return!0;if(t=t.toLowerCase(),e.videoId.toString().toLowerCase().search(t)>=0||e.title.toString().toLowerCase().search(t)>=0||e.description.toString().toLowerCase().search(t)>=0)return!0;return!1}(e,t)}))).map((function(e,t){return Object(f.jsx)("ul",{children:Object(f.jsx)("li",{children:Object(f.jsx)("a",{href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer",children:e.title})})},t)}))})]});var t,n};var G=function(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),r=n[0],i=n[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),o=s[0],l=s[1];return Object(c.useEffect)((function(){j.a.get(h.APIEndpoints.TRACKED_VIDEOS).then((function(e){return i(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked videos: ".concat(e))}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)(Y.a,{onChange:function(e){l(e)},placeholder:"Search Videos..."}),Object(f.jsx)(M,{queryString:o,list:r})]})};function J(){return Object(f.jsx)(s.a,{children:Object(f.jsx)("div",{children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.b,{path:"/track-new-playlist",children:Object(f.jsx)(B,{})}),Object(f.jsx)(o.b,{path:"/manage",children:Object(f.jsx)(K,{})}),Object(f.jsx)(o.b,{path:"/search",children:Object(f.jsx)(G,{})}),Object(f.jsx)(o.b,{exact:!0,path:"/",children:Object(f.jsx)(T,{})})]})})})}a.a.render(Object(f.jsx)(J,{}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.8a418662.chunk.js.map