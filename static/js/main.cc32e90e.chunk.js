(this.webpackJsonpshuffle_youtube_playlist=this.webpackJsonpshuffle_youtube_playlist||[]).push([[0],{41:function(e,t,n){e.exports=n(79)},46:function(e,t,n){},47:function(e,t,n){},79:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),c=n(33),o=n.n(c),r=(n(46),n(47),n(11)),i=n(1),u=n(13),s=n(4),d=n(8),m=n.n(d),f="https://happy-youtube-watcher.herokuapp.com",p={APIEndpoints:{SHUFFLE:f+"/shuffle",TRACKED_PLAYLISTS:f+"/tracked-playlists",TRACKED_VIDEOS:f+"/videos"}};var h=function(e){return l.a.createElement("button",{className:"".concat(e.className).concat(e.toggled?" toggled":""),onClick:function(){return e.setToggled(!e.toggled)}},e.message)};var b=function(e){return l.a.createElement("div",{className:"buttonList"},l.a.createElement("div",null,l.a.createElement("button",{onClick:e.pickPreviousVideo,className:"buttonListButton"},"Previous Video"),l.a.createElement(h,{toggled:e.repeatVideo,setToggled:e.setRepeatVideo,message:"Repeat Video",className:"buttonListButton"}),l.a.createElement("button",{onClick:e.pickNextVideo,className:"buttonListButton"},"Next Video"),l.a.createElement(r.b,{to:"/track-new-playlist",className:"link"},l.a.createElement("button",{type:"button",className:"buttonListButton"},"Track New Playlist")),l.a.createElement(r.b,{to:"/search",target:"_blank",rel:"noopener noreferrer",className:"link"},l.a.createElement("button",{type:"button",className:"buttonListButton"},"Search"))))},v=n(35),E=n.n(v);var y=function(e){return l.a.createElement(E.a,{url:"https://www.youtube.com/watch?v=".concat(e.videoId),controls:!0,onReady:function(e){},onEnded:function(){return e.onEnd()},onError:function(){return console.log("BROKEN VIDEO: ".concat(JSON.stringify(e.videoId,null,2))),void e.onEnd()},playing:!0,width:"100%",height:"800px",config:{youtube:{playerVars:{},embedOptions:{host:"https://www.youtube-nocookie.com"}},attributes:{},tracks:[]}})};var g=function(e){return l.a.createElement("div",{className:"playlistSelectorItem"},l.a.createElement("label",{className:"checkbox_label"},l.a.createElement("input",{type:"checkbox",value:e.value,checked:e.checked,onChange:function(){return e.onCheckboxChange(e.value)},className:"checkbox_input"}),e.label))};var k=function(e){return l.a.createElement("div",{id:"playlistSelector",className:"playlistSelector"},l.a.createElement("div",{className:"playlistSelectorTitle"},"Available Playlists"),l.a.createElement("div",{className:"playlistSelectorInner"},e.playlists.map((function(t){return l.a.createElement(g,{key:t.playlist_id,label:t.name,value:t.playlist_id,checked:t.is_default,onCheckboxChange:function(t){return e.onCheckboxChange(t)}})}))),l.a.createElement("button",{onClick:function(){return e.onShuffle()},className:"playlistSelectorButton"},"Combine Playlists"),l.a.createElement("button",{onClick:function(){return e.onSelectNone()},className:"playlistSelectorButton"},"Select None"))};var S=function(e){return l.a.createElement("div",{id:"videoTitleDisplay",onClick:function(){return e.onVideoClicked(e.videoId)},className:"".concat(e.className)},l.a.createElement("div",{style:{flex:1}},e.title),l.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})))};var C=function(e){var t=Object(a.useState)(e.isCollapsedDefault),n=Object(s.a)(t,2),c=n[0],o=n[1],r=e.videos.slice().reverse();return l.a.createElement("div",{className:"videoPool"},l.a.createElement("div",{className:"videoPoolTitle",onClick:function(){return o(!c)}},"Video History (Expand/Collapse)"),l.a.createElement("div",{className:"videoPoolList ".concat(c?"hide":"")},r.map((function(t,n){return l.a.createElement(S,{key:n,videoId:t.video_id,title:t.title,onVideoClicked:function(t){return e.onVideoClicked(t)},className:"videoPoolItem"})}))))};var N=function(e){var t=Object(a.useState)(!0),n=Object(s.a)(t,2),c=n[0],o=n[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"videoTitleDisplay",className:"currentVideoTitle contentRow",onClick:function(){return o(!c)}},l.a.createElement("div",{style:{flex:1}},e.currentVideo.title),l.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.currentVideo.video_id),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"}))),l.a.createElement("div",{className:"contentRow"},l.a.createElement("div",{className:"".concat(c?"hide":"")},e.currentVideo.description)))};var _=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)([]),i=Object(s.a)(r,2),d=i[0],f=i[1],h=Object(a.useState)({}),v=Object(s.a)(h,2),E=v[0],g=v[1],S=Object(a.useState)([]),_=Object(s.a)(S,2),O=_[0],j=_[1],I=Object(a.useState)(!1),V=Object(s.a)(I,2),w=V[0],P=V[1];function L(){var e={playlist_ids:c.filter((function(e){return e.is_default})).map((function(e){return e.playlist_id}))};m.a.post(p.APIEndpoints.SHUFFLE,e).then((function(e){return f(e.data.songs)})).catch((function(e){return console.log("Couldn't retrieve playlist videos! ".concat(e))}))}function x(e){if(d.length)if(w)g(E);else{var t=e?d.filter((function(t){return t.video_id===e}))[0]:d[Math.floor(Math.random()*d.length)%d.length];g(t),j(O.concat(t))}}return Object(a.useEffect)(L,[]),Object(a.useEffect)((function(){m.a.get(p.APIEndpoints.TRACKED_PLAYLISTS).then((function(e){return o(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked playlists! ".concat(e))}))}),[]),Object(a.useEffect)(x,[d]),l.a.createElement("div",null,l.a.createElement(y,{videoId:E.video_id,onEnd:function(){return x()}}),l.a.createElement(N,{currentVideo:E}),l.a.createElement("div",{className:"contentRow"},l.a.createElement(k,{playlists:c,onCheckboxChange:function(e){return function(e){var t=c.map((function(t){return t.playlist_id===e?Object(u.a)(Object(u.a)({},t),{},{is_default:!t.is_default}):t}));o(t)}(e)},onShuffle:function(){return L()},onSelectNone:function(){return function(){var e=c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{is_default:!1})}));o(e)}()},className:"playlistSelector"}),l.a.createElement(C,{videos:O,currentVideo:E,setCurrentVideo:g,isCollapsedDefault:!1,onVideoClicked:function(e){return x(e)}}),l.a.createElement(b,{repeatVideo:w,setRepeatVideo:P,pickNextVideo:function(){return x()},pickPreviousVideo:function(){return function(){if(Array.isArray(O)&&!(O.length<=1)){var e=O[O.length-2];g(e),j(O.concat(e)),console.log("".concat(O.length,": https://youtube.com/watch?v=").concat(e.video_id,"\t").concat(e.title))}}()}})))},O=n(14),j=n(36),I=n(37),V=n(12),w=n(40),P=n(39),L=function(e){Object(w.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(j.a)(this,n),(a=t.call(this,e)).state={playlist_id:"",is_default:!0},a.handleInputChange=a.handleInputChange.bind(Object(V.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(V.a)(a)),a}return Object(I.a)(n,[{key:"handleInputChange",value:function(e){var t=e.target,n="is_default"===t.name?t.checked:t.value,a=t.name;this.setState(Object(O.a)({},a,n))}},{key:"handleSubmit",value:function(e){return console.log("Submitting to server!"),e.preventDefault(),m.a.post(p.APIEndpoints.TRACKED_PLAYLISTS,{playlist_id:this.state.playlist_id,is_default:this.state.is_default}).then((function(e){return console.log(e)})).catch((function(e){return console.log("Couldn't track playlist: ".concat(e))})),l.a.createElement(i.a,{to:"/home"})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Playlist ID:",l.a.createElement("input",{type:"text",name:"playlist_id",value:this.state.playlist_id,onChange:this.handleInputChange,placeholder:"(e.g. 'PL8g7AzKjYPsNWX5N1pYudn2OetM85N0GS')"})),l.a.createElement("label",null,"Default Playlist?",l.a.createElement("input",{type:"checkbox",name:"is_default",checked:this.state.is_default,onChange:this.handleInputChange})),l.a.createElement("input",{type:"submit",value:"Submit"}))}}]),n}(l.a.Component);var x=function(e){return l.a.createElement("h1",null,"Playlists Manager")},A=n(38),T=n.n(A),D=function(e){return l.a.createElement("div",{className:"list"},l.a.createElement("div",{className:"list-header"}),l.a.createElement("div",{className:"list-body"},(t=e.queryString,n=e.list,n.filter((function(e){return function(e,t){return""===t||(t=t.toLowerCase(),e.videoId.toString().toLowerCase().search(t)>=0||e.title.toString().toLowerCase().search(t)>=0||e.description.toString().toLowerCase().search(t)>=0)}(e,t)}))).map((function(e,t){return l.a.createElement("ul",{key:t},l.a.createElement("li",null,l.a.createElement("a",{href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},e.title)))}))));var t,n};var R=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),c=n[0],o=n[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),u=i[0],d=i[1];return Object(a.useEffect)((function(){m.a.get(p.APIEndpoints.TRACKED_VIDEOS).then((function(e){return o(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked videos: ".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(T.a,{onChange:function(e){d(e)},placeholder:"Search Videos..."}),l.a.createElement(D,{queryString:u,list:c}))};function B(){return l.a.createElement(r.a,null,l.a.createElement("div",null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/track-new-playlist"},l.a.createElement(L,null)),l.a.createElement(i.b,{path:"/manage"},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/search"},l.a.createElement(R,null)),l.a.createElement(i.b,{path:"/"},l.a.createElement(_,null)))))}o.a.render(l.a.createElement(B,null),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.cc32e90e.chunk.js.map