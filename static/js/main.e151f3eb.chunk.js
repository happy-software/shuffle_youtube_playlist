(this.webpackJsonpshuffle_youtube_playlist=this.webpackJsonpshuffle_youtube_playlist||[]).push([[0],{42:function(e,t,a){e.exports=a(91)},47:function(e,t,a){},48:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(34),o=a.n(c),r=(a(47),a(48),a(13)),i=a(1),u=a(15),s=a(4),d=a(10),m=a.n(d),f="https://happy-youtube-watcher.herokuapp.com",h={APIEndpoints:{SHUFFLE:f+"/shuffle",TRACKED_PLAYLISTS:f+"/tracked-playlists",TRACKED_VIDEOS:f+"/videos"}};var p=function(e){return l.a.createElement("button",{className:"".concat(e.className).concat(e.toggled?" toggled":""),onClick:function(){return e.setToggled(!e.toggled)}},e.message)};var b=function(e){return l.a.createElement("div",{className:"buttonList"},l.a.createElement("div",null,l.a.createElement("button",{onClick:e.pickPreviousVideo,className:"buttonListButton"},"Previous Video"),l.a.createElement(p,{toggled:e.repeatVideo,setToggled:e.setRepeatVideo,message:"Repeat Video",className:"buttonListButton"}),l.a.createElement("button",{onClick:e.pickNextVideo,className:"buttonListButton"},"Next Video"),l.a.createElement(r.b,{to:"/track-new-playlist",className:"link"},l.a.createElement("button",{type:"button",className:"buttonListButton"},"Track New Playlist")),l.a.createElement(r.b,{to:"/search",target:"_blank",rel:"noopener noreferrer",className:"link"},l.a.createElement("button",{type:"button",className:"buttonListButton"},"Search"))))};var v=function(e){return l.a.createElement("div",{className:"loader ".concat(e.isLoaded?"hide":"")},l.a.createElement("svg",{width:"50",height:"50",viewBox:"0 0 50 50"},l.a.createElement("path",{fill:"#c779d0",d:"M25,5A20.14,20.14,0,0,1,45,22.88a2.51,2.51,0,0,0,2.49,2.26h0A2.52,2.52,0,0,0,50,22.33a25.14,25.14,0,0,0-50,0,2.52,2.52,0,0,0,2.5,2.81h0A2.51,2.51,0,0,0,5,22.88,20.14,20.14,0,0,1,25,5Z"},l.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.5s",repeatCount:"indefinite"}))),l.a.createElement("div",null,"Waiting for the backend to load..."))},E=a(36),g=a.n(E);var y=function(e){return l.a.createElement(g.a,{url:"https://www.youtube.com/watch?v=".concat(e.videoId),controls:!0,onReady:function(e){},onEnded:function(){return e.onEnd()},onError:function(){return console.log("BROKEN VIDEO: ".concat(JSON.stringify(e.videoId,null,2))),void e.onEnd()},playing:!0,width:"100%",height:"800px",config:{youtube:{playerVars:{},embedOptions:{host:"https://www.youtube-nocookie.com"}},attributes:{},tracks:[]}})};var k=function(e){return l.a.createElement("div",{className:"playlistSelectorItem"},l.a.createElement("label",{className:"checkbox_label"},l.a.createElement("input",{type:"checkbox",value:e.value,checked:e.checked,onChange:function(){return e.onCheckboxChange(e.value)},className:"checkbox_input"}),e.label))};var S=function(e){return l.a.createElement("div",{id:"playlistSelector",className:"playlistSelector"},l.a.createElement("div",{className:"playlistSelectorTitle"},"Available Playlists"),l.a.createElement("div",{className:"playlistSelectorInner"},e.playlists.map((function(t){return l.a.createElement(k,{key:t.playlist_id,label:t.name,value:t.playlist_id,checked:t.is_default,onCheckboxChange:function(t){return e.onCheckboxChange(t)}})}))),l.a.createElement("button",{onClick:function(){return e.onShuffle()},className:"playlistSelectorButton"},"Combine Playlists"),l.a.createElement("button",{onClick:function(){return e.onSelectNone()},className:"playlistSelectorButton"},"Select None"))};var C=function(e){return l.a.createElement("div",{id:"videoTitleDisplay",onClick:function(){return e.onVideoClicked(e.videoId)},className:"".concat(e.className)},l.a.createElement("div",{style:{flex:1}},e.title),l.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})))};var N=function(e){var t=Object(n.useState)(e.isCollapsedDefault),a=Object(s.a)(t,2),c=a[0],o=a[1],r=e.videos.slice().reverse();return l.a.createElement("div",{className:"videoPool"},l.a.createElement("div",{className:"videoPoolTitle",onClick:function(){return o(!c)}},"Video History (Expand/Collapse)"),l.a.createElement("div",{className:"videoPoolList ".concat(c?"hide":"")},r.map((function(t,a){return l.a.createElement(C,{key:a,videoId:t.video_id,title:t.title,onVideoClicked:function(t){return e.onVideoClicked(t)},className:"videoPoolItem"})}))))};var O=function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=a[0],o=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{id:"videoTitleDisplay",className:"currentVideoTitle contentRow",onClick:function(){return o(!c)}},l.a.createElement("div",{style:{flex:1}},e.currentVideo.title),l.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.currentVideo.video_id),target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"}))),l.a.createElement("div",{className:"contentRow"},l.a.createElement("div",{className:"".concat(c?"hide":"")},e.currentVideo.description)))};var _=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)([]),i=Object(s.a)(r,2),d=i[0],f=i[1],p=Object(n.useState)([]),E=Object(s.a)(p,2),g=E[0],k=E[1],C=Object(n.useState)({}),_=Object(s.a)(C,2),j=_[0],w=_[1],I=Object(n.useState)([]),V=Object(s.a)(I,2),L=V[0],P=V[1],x=Object(n.useState)(!1),A=Object(s.a)(x,2),T=A[0],D=A[1];function R(){var e={playlist_ids:d.filter((function(e){return e.is_default})).map((function(e){return e.playlist_id}))};m.a.post(h.APIEndpoints.SHUFFLE,e).then((function(e){return k(e.data.songs)})).catch((function(e){return console.log("Couldn't retrieve playlist videos! ".concat(e))}))}function B(e){if(g.length)if(T)w(j);else{var t=e?g.filter((function(t){return t.video_id===e}))[0]:g[Math.floor(Math.random()*g.length)%g.length];w(t),P(L.concat(t))}}return Object(n.useEffect)(R,[]),Object(n.useEffect)((function(){m.a.get(h.APIEndpoints.TRACKED_PLAYLISTS).then((function(e){f(e.data),o(!0)})).catch((function(e){return console.log("Couldn't retrieve tracked playlists! ".concat(e))}))}),[]),Object(n.useEffect)(B,[g]),l.a.createElement("div",null,l.a.createElement(v,{isLoaded:c}),l.a.createElement(y,{videoId:j.video_id,onEnd:function(){return B()}}),l.a.createElement(O,{currentVideo:j}),l.a.createElement("div",{className:"contentRow"},l.a.createElement(S,{playlists:d,onCheckboxChange:function(e){return function(e){var t=d.map((function(t){return t.playlist_id===e?Object(u.a)(Object(u.a)({},t),{},{is_default:!t.is_default}):t}));f(t)}(e)},onShuffle:function(){return R()},onSelectNone:function(){return function(){var e=d.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{is_default:!1})}));f(e)}()},className:"playlistSelector"}),l.a.createElement(N,{videos:L,currentVideo:j,setCurrentVideo:w,isCollapsedDefault:!1,onVideoClicked:function(e){return B(e)}}),l.a.createElement(b,{repeatVideo:T,setRepeatVideo:D,pickNextVideo:function(){return B()},pickPreviousVideo:function(){return function(){if(Array.isArray(L)&&!(L.length<=1)){var e=L[L.length-2];w(e),P(L.concat(e)),console.log("".concat(L.length,": https://youtube.com/watch?v=").concat(e.video_id,"\t").concat(e.title))}}()}})))},j=a(16),w=a(37),I=a(38),V=a(14),L=a(41),P=a(40),x=function(e){Object(L.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={playlist_id:"",is_default:!0},n.handleInputChange=n.handleInputChange.bind(Object(V.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n}return Object(I.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a="is_default"===t.name?t.checked:t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"handleSubmit",value:function(e){return console.log("Submitting to server!"),e.preventDefault(),m.a.post(h.APIEndpoints.TRACKED_PLAYLISTS,{playlist_id:this.state.playlist_id,is_default:this.state.is_default}).then((function(e){return console.log(e)})).catch((function(e){return console.log("Couldn't track playlist: ".concat(e))})),l.a.createElement(i.a,{to:"/home"})}},{key:"render",value:function(){return l.a.createElement("form",{onSubmit:this.handleSubmit},l.a.createElement("label",null,"Playlist ID:",l.a.createElement("input",{type:"text",name:"playlist_id",value:this.state.playlist_id,onChange:this.handleInputChange,placeholder:"(e.g. 'PL8g7AzKjYPsNWX5N1pYudn2OetM85N0GS')"})),l.a.createElement("label",null,"Default Playlist?",l.a.createElement("input",{type:"checkbox",name:"is_default",checked:this.state.is_default,onChange:this.handleInputChange})),l.a.createElement("input",{type:"submit",value:"Submit"}))}}]),a}(l.a.Component);var A=function(e){return l.a.createElement("h1",null,"Playlists Manager")},T=a(39),D=a.n(T),R=function(e){return l.a.createElement("div",{className:"list"},l.a.createElement("div",{className:"list-header"}),l.a.createElement("div",{className:"list-body"},(t=e.queryString,a=e.list,a.filter((function(e){return function(e,t){return""===t||(t=t.toLowerCase(),e.videoId.toString().toLowerCase().search(t)>=0||e.title.toString().toLowerCase().search(t)>=0||e.description.toString().toLowerCase().search(t)>=0)}(e,t)}))).map((function(e,t){return l.a.createElement("ul",{key:t},l.a.createElement("li",null,l.a.createElement("a",{href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},e.title)))}))));var t,a};var B=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(""),i=Object(s.a)(r,2),u=i[0],d=i[1];return Object(n.useEffect)((function(){m.a.get(h.APIEndpoints.TRACKED_VIDEOS).then((function(e){return o(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked videos: ".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(D.a,{onChange:function(e){d(e)},placeholder:"Search Videos..."}),l.a.createElement(R,{queryString:u,list:c}))};function K(){return l.a.createElement(r.a,null,l.a.createElement("div",null,l.a.createElement(i.d,null,l.a.createElement(i.b,{path:"/track-new-playlist"},l.a.createElement(x,null)),l.a.createElement(i.b,{path:"/manage"},l.a.createElement(A,null)),l.a.createElement(i.b,{path:"/search"},l.a.createElement(B,null)),l.a.createElement(i.b,{path:"/"},l.a.createElement(_,null)))))}o.a.render(l.a.createElement(K,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.e151f3eb.chunk.js.map