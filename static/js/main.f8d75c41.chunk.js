(this.webpackJsonpshuffle_youtube_playlist=this.webpackJsonpshuffle_youtube_playlist||[]).push([[0],{42:function(e,t,a){e.exports=a(91)},47:function(e,t,a){},48:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),c=a.n(l),o=(a(47),a(48),a(13)),i=a(1),s=a(15),u=a(4),d=a(10),m=a.n(d),f="https://happy-youtube-watcher.herokuapp.com",h={APIEndpoints:{SHUFFLE:f+"/shuffle",TRACKED_PLAYLISTS:f+"/tracked-playlists",TRACKED_VIDEOS:f+"/videos"}};var p=function(e){return r.a.createElement("button",{className:"".concat(e.className).concat(e.toggled?" toggled":""),onClick:function(){return e.setToggled(!e.toggled)}},e.message)};var v=function(e){return r.a.createElement("div",{className:"buttonList"},r.a.createElement("div",null,r.a.createElement("button",{onClick:e.pickPreviousVideo,className:"buttonListButton"},"Previous Video"),r.a.createElement(p,{toggled:e.repeatVideo,setToggled:e.setRepeatVideo,message:"Repeat Video",className:"buttonListButton"}),r.a.createElement("button",{onClick:e.pickNextVideo,className:"buttonListButton"},"Next Video"),r.a.createElement(o.b,{to:"/track-new-playlist",className:"link"},r.a.createElement("button",{type:"button",className:"buttonListButton"},"Track New Playlist")),r.a.createElement(o.b,{to:"/search",target:"_blank",rel:"noopener noreferrer",className:"link"},r.a.createElement("button",{type:"button",className:"buttonListButton"},"Search"))))};var E=function(e){return r.a.createElement("div",{className:"loader"},r.a.createElement("svg",{width:"50",height:"50",viewBox:"0 0 50 50"},r.a.createElement("path",{fill:"#c779d0",d:"M25,5A20.14,20.14,0,0,1,45,22.88a2.51,2.51,0,0,0,2.49,2.26h0A2.52,2.52,0,0,0,50,22.33a25.14,25.14,0,0,0-50,0,2.52,2.52,0,0,0,2.5,2.81h0A2.51,2.51,0,0,0,5,22.88,20.14,20.14,0,0,1,25,5Z"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.5s",repeatCount:"indefinite"}))),r.a.createElement("div",null,"Give me a minute to wake up... so sleepy..."))},b=a(36),y=a.n(b);var g=function(e){return r.a.createElement(y.a,{url:"https://www.youtube.com/watch?v=".concat(e.videoId),controls:!0,onReady:function(e){},onEnded:function(){return e.onEnd()},onError:function(){return console.log("BROKEN VIDEO: ".concat(JSON.stringify(e.videoId,null,2))),void e.onEnd()},playing:!0,width:"100%",height:"800px",config:{youtube:{playerVars:{},embedOptions:{host:"https://www.youtube-nocookie.com"}},attributes:{},tracks:[]}})};var k=function(e){return r.a.createElement("div",{className:"playlistSelectorItem"},r.a.createElement("label",{className:"checkbox_label"},r.a.createElement("input",{type:"checkbox",value:e.value,checked:e.checked,onChange:function(){return e.onCheckboxChange(e.value)},className:"checkbox_input"}),e.label))};var S=function(e){return r.a.createElement("div",{id:"playlistSelector",className:"playlistSelector"},r.a.createElement("div",{className:"playlistSelectorTitle"},"Available Playlists"),r.a.createElement("div",{className:"playlistSelectorInner"},e.playlists.map((function(t){return r.a.createElement(k,{key:t.playlist_id,label:t.name,value:t.playlist_id,checked:t.is_default,onCheckboxChange:function(t){return e.onCheckboxChange(t)}})}))),r.a.createElement("button",{onClick:function(){return e.onShuffle()},className:"playlistSelectorButton"},"Combine Playlists"),r.a.createElement("button",{onClick:function(){return e.onSelectNone()},className:"playlistSelectorButton"},"Select None"))};var _=function(e){return r.a.createElement("div",{id:"videoTitleDisplay",onClick:function(){return e.onVideoClicked(e.videoId)},className:"".concat(e.className)},r.a.createElement("div",{style:{flex:1}},e.title),r.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})))};var C=function(e){var t=Object(n.useState)(e.isCollapsedDefault),a=Object(u.a)(t,2),l=a[0],c=a[1],o=e.videos.slice().reverse();return r.a.createElement("div",{className:"videoPool"},r.a.createElement("div",{className:"videoPoolTitle",onClick:function(){return c(!l)}},"Video History (Expand/Collapse)"),r.a.createElement("div",{className:"videoPoolList ".concat(l?"hide":"")},o.map((function(t,a){return r.a.createElement(_,{key:a,videoId:t.video_id,title:t.title,onVideoClicked:function(t){return e.onVideoClicked(t)},className:"videoPoolItem"})}))))};var N=function(e){var t=Object(n.useState)(!0),a=Object(u.a)(t,2),l=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"videoTitleDisplay",className:"currentVideoTitle contentRow",onClick:function(){return c(!l)}},r.a.createElement("div",{style:{flex:1}},e.currentVideo.title),r.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.currentVideo.video_id),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"}))),r.a.createElement("div",{className:"contentRow"},r.a.createElement("div",{className:"".concat(l?"hide":"")},e.currentVideo.description)))};var O=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),i=Object(u.a)(o,2),d=i[0],f=i[1],p=Object(n.useState)([]),b=Object(u.a)(p,2),y=b[0],k=b[1],_=Object(n.useState)({}),O=Object(u.a)(_,2),j=O[0],w=O[1],I=Object(n.useState)([]),V=Object(u.a)(I,2),P=V[0],x=V[1],L=Object(n.useState)(!1),A=Object(u.a)(L,2),T=A[0],D=A[1];function R(){var e={playlist_ids:d.filter((function(e){return e.is_default})).map((function(e){return e.playlist_id}))};m.a.post(h.APIEndpoints.SHUFFLE,e).then((function(e){return k(e.data.songs)})).catch((function(e){return console.log("Couldn't retrieve playlist videos! ".concat(e))}))}function B(e){if(y.length)if(T)w(j);else{var t=e?y.filter((function(t){return t.video_id===e}))[0]:y[Math.floor(Math.random()*y.length)%y.length];w(t),x(P.concat(t))}}return Object(n.useEffect)(R,[]),Object(n.useEffect)((function(){m.a.get(h.APIEndpoints.TRACKED_PLAYLISTS).then((function(e){f(e.data),c(!0)})).catch((function(e){return console.log("Couldn't retrieve tracked playlists! ".concat(e))}))}),[]),Object(n.useEffect)(B,[y]),l?r.a.createElement("div",null,r.a.createElement(g,{videoId:j.video_id,onEnd:function(){return B()}}),r.a.createElement(N,{currentVideo:j}),r.a.createElement("div",{className:"contentRow"},r.a.createElement(S,{playlists:d,onCheckboxChange:function(e){return function(e){var t=d.map((function(t){return t.playlist_id===e?Object(s.a)(Object(s.a)({},t),{},{is_default:!t.is_default}):t}));f(t)}(e)},onShuffle:function(){return R()},onSelectNone:function(){return function(){var e=d.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{is_default:!1})}));f(e)}()},className:"playlistSelector"}),r.a.createElement(C,{videos:P,currentVideo:j,setCurrentVideo:w,isCollapsedDefault:!1,onVideoClicked:function(e){return B(e)}}),r.a.createElement(v,{repeatVideo:T,setRepeatVideo:D,pickNextVideo:function(){return B()},pickPreviousVideo:function(){return function(){if(Array.isArray(P)&&!(P.length<=1)){var e=P[P.length-2];w(e),x(P.concat(e)),console.log("".concat(P.length,": https://youtube.com/watch?v=").concat(e.video_id,"\t").concat(e.title))}}()}}))):r.a.createElement(E,null)},j=a(16),w=a(37),I=a(38),V=a(14),P=a(41),x=a(40),L=function(e){Object(P.a)(a,e);var t=Object(x.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).state={playlist_id:"",is_default:!0,server_errors:[],redirect_home:!1},n.handleInputChange=n.handleInputChange.bind(Object(V.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(V.a)(n)),n}return Object(I.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a="is_default"===t.name?t.checked:t.value,n=t.name;this.setState(Object(j.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({server_errors:[]}),m.a.post(h.APIEndpoints.TRACKED_PLAYLISTS,{playlist_id:this.state.playlist_id,is_default:this.state.is_default}).then((function(e){e.status>=200&&e.status<300&&t.setState({redirect_home:!0})})).catch((function(e){return t.setState({server_errors:[e],redirect_home:!1})}))}},{key:"render",value:function(){return this.state.redirect_home?r.a.createElement(i.a,{to:"/"}):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Playlist ID: "),r.a.createElement("input",{type:"text",name:"playlist_id",value:this.state.playlist_id,onChange:this.handleInputChange,placeholder:"(e.g. 'PL8g7AzKjYPsNWX5N1pYudn2OetM85N0GS')",style:{width:"40%"}}),r.a.createElement("label",null," Default Playlist? "),r.a.createElement("input",{type:"checkbox",name:"is_default",checked:this.state.is_default,onChange:this.handleInputChange}),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("div",{style:{marginTop:"25px"},className:"".concat(this.state.server_errors.length>0?"":"hide")},"Submission Errors: ",this.state.server_errors.map((function(e,t){return r.a.createElement("li",{key:t},e.response.data.errors)}))))}}]),a}(r.a.Component);var A=function(e){return r.a.createElement("h1",null,"Playlists Manager")},T=a(39),D=a.n(T),R=function(e){return r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"list-header"}),r.a.createElement("div",{className:"list-body"},(t=e.queryString,a=e.list,a.filter((function(e){return function(e,t){return""===t||(t=t.toLowerCase(),e.videoId.toString().toLowerCase().search(t)>=0||e.title.toString().toLowerCase().search(t)>=0||e.description.toString().toLowerCase().search(t)>=0)}(e,t)}))).map((function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,r.a.createElement("a",{href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},e.title)))}))));var t,a};var B=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),i=Object(u.a)(o,2),s=i[0],d=i[1];return Object(n.useEffect)((function(){m.a.get(h.APIEndpoints.TRACKED_VIDEOS).then((function(e){return c(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked videos: ".concat(e))}))}),[]),r.a.createElement("div",null,r.a.createElement(D.a,{onChange:function(e){d(e)},placeholder:"Search Videos..."}),r.a.createElement(R,{queryString:s,list:l}))};function K(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/track-new-playlist"},r.a.createElement(L,null)),r.a.createElement(i.b,{path:"/manage"},r.a.createElement(A,null)),r.a.createElement(i.b,{path:"/search"},r.a.createElement(B,null)),r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(O,null)))))}c.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.f8d75c41.chunk.js.map