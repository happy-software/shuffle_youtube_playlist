(this.webpackJsonpshuffle_youtube_playlist=this.webpackJsonpshuffle_youtube_playlist||[]).push([[0],{44:function(e,t,a){e.exports=a(94)},49:function(e,t,a){},50:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(35),c=a.n(l),o=(a(49),a(50),a(14)),i=a(1),s=a(10),u=a(3),d=a(11),m=a.n(d),f="https://happy-youtube-watcher.herokuapp.com",p={APIEndpoints:{SHUFFLE:f+"/shuffle",TRACKED_PLAYLISTS:f+"/tracked-playlists",TRACKED_VIDEOS:f+"/videos"}};var h=function(e){return r.a.createElement("button",{className:"".concat(e.className).concat(e.toggled?" toggled":""),onClick:function(){return e.setToggled(!e.toggled)}},e.message)};var E=function(e){return r.a.createElement("div",{className:"buttonList"},r.a.createElement("div",null,r.a.createElement("button",{onClick:e.pickNextVideo,className:"buttonListButton nextVideoButton"},"Next Video"),r.a.createElement(h,{toggled:e.repeatVideo,setToggled:e.setRepeatVideo,message:"Repeat Video",className:"buttonListButton"}),r.a.createElement(h,{toggled:e.hideVideo,setToggled:e.setHideVideo,message:e.hideVideo?"Show Video":"Hide Video",className:"buttonListButton"}),r.a.createElement(o.b,{to:"/track-new-playlist",className:"link"},r.a.createElement("button",{type:"button",className:"buttonListButton"},"Track New Playlist")),r.a.createElement(o.b,{to:"/search",target:"_blank",rel:"noopener noreferrer",className:"link"},r.a.createElement("button",{type:"button",className:"buttonListButton"},"Search"))))};var v=function(e){return r.a.createElement("div",{className:"loader"},r.a.createElement("svg",{width:"50",height:"50",viewBox:"0 0 50 50"},r.a.createElement("path",{fill:"#c779d0",d:"M25,5A20.14,20.14,0,0,1,45,22.88a2.51,2.51,0,0,0,2.49,2.26h0A2.52,2.52,0,0,0,50,22.33a25.14,25.14,0,0,0-50,0,2.52,2.52,0,0,0,2.5,2.81h0A2.51,2.51,0,0,0,5,22.88,20.14,20.14,0,0,1,25,5Z"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.5s",repeatCount:"indefinite"}))),r.a.createElement("div",null,"Give me a minute to wake up... so sleepy..."))},b=a(37),y=a.n(b);var g=function(e){return r.a.createElement("div",{style:{display:e.hideVideo?"none":"block"}},r.a.createElement(y.a,{url:"https://www.youtube.com/watch?v=".concat(e.videoId),controls:!0,loop:e.repeatVideo,onReady:function(e){},onEnded:function(){return e.onEnd()},onError:function(){return console.log("BROKEN VIDEO: ".concat(JSON.stringify(e.videoId,null,2))),void e.onEnd()},playing:!0,width:"100%",height:"800px",config:{youtube:{playerVars:{},embedOptions:{host:"https://www.youtube-nocookie.com"}},attributes:{},tracks:[]}}))};var S=function(e){return r.a.createElement("div",{className:"playlistSelectorItem"},r.a.createElement("label",{className:"checkbox_label"},r.a.createElement("input",{type:"checkbox",value:e.value,checked:e.checked,onChange:function(){return e.onCheckboxChange(e.value)},className:"checkbox_input"}),e.label))};var k=function(e){return r.a.createElement("div",{id:"playlistSelector",className:"playlistSelector"},r.a.createElement("div",{className:"playlistSelectorTitle"},"Available Playlists"),r.a.createElement("div",{className:"playlistSelectorInner"},e.playlists.map((function(t){return r.a.createElement(S,{key:t.playlist_id,label:t.name,value:t.playlist_id,checked:t.is_default,onCheckboxChange:function(t){return e.onCheckboxChange(t)}})}))),r.a.createElement("button",{onClick:function(){return e.onShuffle()},className:"playlistSelectorButton"},"Combine Playlists"),r.a.createElement("button",{onClick:function(){return e.onSelectNone()},className:"playlistSelectorButton"},"Select None"))};var C=function(e){return r.a.createElement("div",{id:"videoTitleDisplay",onClick:function(){return e.onVideoClicked(e.videoId)},className:"".concat(e.className)},r.a.createElement("div",{style:{flex:1}},e.title),r.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"})))};var _=function(e){var t=Object(n.useState)(e.isCollapsedDefault),a=Object(u.a)(t,2),l=a[0],c=a[1],o=e.videos.slice().reverse();return r.a.createElement("div",{className:"videoPool"},r.a.createElement("div",{className:"videoPoolTitle",onClick:function(){return c(!l)}},"Video History (Expand/Collapse)"),r.a.createElement("div",{className:"videoPoolList ".concat(l?"hide":"")},o.map((function(t,a){return r.a.createElement(C,{key:a,videoId:t.video_id,title:t.title,onVideoClicked:function(t){return e.onVideoClicked(t)},className:"videoPoolItem"})}))))};var O=function(e){var t=Object(n.useState)(!0),a=Object(u.a)(t,2),l=a[0],c=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"videoTitleDisplay",className:"currentVideoTitle contentRow",onClick:function(){return c(!l)}},r.a.createElement("div",{style:{flex:1}},e.currentVideo.title),r.a.createElement("a",{style:{paddingLeft:3,flex:0},href:"https://youtube.com/watch?v=".concat(e.currentVideo.video_id),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{alt:"Go to Youtube",src:"/arrow-up-right.svg"}))),r.a.createElement("div",{className:"contentRow"},r.a.createElement("div",{className:"".concat(l?"hide":"")},e.currentVideo.description)))},N=a(21),j=a.n(N),w=a(38),I={videos:[],isLoaded:!1,error:null,isError:!1},V=function(e,t){switch(t.type){case"FETCH_INIT":return I;case"FETCH_SUCCESS":return Object(s.a)(Object(s.a)({},I),{},{videos:t.data.songs,isLoaded:!0});case"FETCH_FAILURE":var a=Object(s.a)(Object(s.a)({},I),{},{error:t.error,isError:!0});return console.log("Error encountered during video fetch"),console.log(a.error),a;default:throw new Error("Unhandled event type: ".concat(t.type))}},L=function(){var e=Object(w.a)(j.a.mark((function e(t,a,n,r){var l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"FETCH_INIT"}),e.prev=1,e.next=4,m.a.post(t,a);case 4:if(l=e.sent,!r){e.next=7;break}return e.abrupt("return");case 7:n({type:"FETCH_SUCCESS",data:l.data}),e.next=15;break;case 10:if(e.prev=10,e.t0=e.catch(1),!r){e.next=14;break}return e.abrupt("return");case 14:n({type:"FETCH_FAILURE",error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}();var x=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)({}),o=Object(u.a)(c,2),i=o[0],d=o[1],f=Object(n.useState)([]),h=Object(u.a)(f,2),b=h[0],y=h[1],S=Object(n.useState)(!1),C=Object(u.a)(S,2),N=C[0],j=C[1],w=Object(n.useState)(!1),x=Object(u.a)(w,2),T=x[0],A=x[1],P=Object(n.useState)([]),R=Object(u.a)(P,2),D=R[0],F=R[1],H=function(e){var t=Object(n.useState)(e),a=Object(u.a)(t,2),r=a[0],l=a[1],c=Object(n.useReducer)(V,I),o=Object(u.a)(c,2),i=o[0],s=o[1];return Object(n.useEffect)((function(){var e=!1;return L(p.APIEndpoints.SHUFFLE,{playlist_ids:r},s,e),function(){return e=!0}}),[r]),[i,l]}(D),B=Object(u.a)(H,2),K=B[0],U=B[1];function Y(){if(K.isLoaded){var e,t,a=(e=0,t=K.videos.length,Math.floor(Math.random()*(t-e))+e),n=K.videos[a];d(n),M(n)}}function M(e){y((function(t){return t.concat(e)}))}return Object(n.useEffect)((function(){m.a.get(p.APIEndpoints.TRACKED_PLAYLISTS).then((function(e){return l(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked playlists! ".concat(e))}))}),[]),Object(n.useEffect)(Y,[K]),K.isLoaded?r.a.createElement("div",null,r.a.createElement(g,{videoId:i.video_id,onEnd:function(){return Y()},repeatVideo:N,hideVideo:T}),r.a.createElement(O,{currentVideo:i}),r.a.createElement("div",{className:"contentRow"},r.a.createElement(k,{playlists:a,onCheckboxChange:function(e){return function(e){var t=a.map((function(t){return t.playlist_id===e?Object(s.a)(Object(s.a)({},t),{},{is_default:!t.is_default}):t})),n=t.filter((function(e){return e.is_default})).map((function(e){return e.playlist_id}));F(n),l(t)}(e)},onShuffle:function(){return U(D)},onSelectNone:function(){return function(){var e=a.map((function(e){return Object(s.a)(Object(s.a)({},e),{},{is_default:!1})}));F([]),l(e)}()},className:"playlistSelector"}),r.a.createElement(_,{videos:b,isCollapsedDefault:!1,onVideoClicked:function(e){return function(e){if(K.isLoaded){var t=K.videos.filter((function(t){return t.video_id===e}))[0];d(t),M(t)}}(e)}}),r.a.createElement(E,{repeatVideo:N,setRepeatVideo:j,hideVideo:T,setHideVideo:A,pickNextVideo:function(){return Y()}}))):r.a.createElement(v,null)},T=a(16),A=a(39),P=a(40),R=a(15),D=a(43),F=a(42),H=function(e){Object(D.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).state={playlist_id:"",is_default:!0,server_errors:[],redirect_home:!1},n.handleInputChange=n.handleInputChange.bind(Object(R.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(R.a)(n)),n}return Object(P.a)(a,[{key:"handleInputChange",value:function(e){var t=e.target,a="is_default"===t.name?t.checked:t.value,n=t.name;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setState({server_errors:[]}),m.a.post(p.APIEndpoints.TRACKED_PLAYLISTS,{playlist_id:this.state.playlist_id,is_default:this.state.is_default}).then((function(e){e.status>=200&&e.status<300&&t.setState({redirect_home:!0})})).catch((function(e){return t.setState({server_errors:[e],redirect_home:!1})}))}},{key:"render",value:function(){return this.state.redirect_home?r.a.createElement(i.a,{to:"/"}):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Playlist ID: "),r.a.createElement("input",{type:"text",name:"playlist_id",value:this.state.playlist_id,onChange:this.handleInputChange,placeholder:"(e.g. 'PL8g7AzKjYPsNWX5N1pYudn2OetM85N0GS')",style:{width:"40%"}}),r.a.createElement("label",null," Default Playlist? "),r.a.createElement("input",{type:"checkbox",name:"is_default",checked:this.state.is_default,onChange:this.handleInputChange}),r.a.createElement("p",null,r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("div",{style:{marginTop:"25px"},className:"".concat(this.state.server_errors.length>0?"":"hide")},"Submission Errors: ",this.state.server_errors.map((function(e,t){return r.a.createElement("li",{key:t},e.response.data.errors)}))))}}]),a}(r.a.Component);var B=function(e){return r.a.createElement("h1",null,"Playlists Manager")},K=a(41),U=a.n(K),Y=function(e){return r.a.createElement("div",{className:"list"},r.a.createElement("div",{className:"list-header"}),r.a.createElement("div",{className:"list-body"},(t=e.queryString,a=e.list,a.filter((function(e){return function(e,t){return""===t||(t=t.toLowerCase(),e.videoId.toString().toLowerCase().search(t)>=0||e.title.toString().toLowerCase().search(t)>=0||e.description.toString().toLowerCase().search(t)>=0)}(e,t)}))).map((function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,r.a.createElement("a",{href:"https://youtube.com/watch?v=".concat(e.videoId),target:"_blank",rel:"noopener noreferrer"},e.title)))}))));var t,a};var M=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(""),i=Object(u.a)(o,2),s=i[0],d=i[1];return Object(n.useEffect)((function(){m.a.get(p.APIEndpoints.TRACKED_VIDEOS).then((function(e){return c(e.data)})).catch((function(e){return console.log("Couldn't retrieve tracked videos: ".concat(e))}))}),[]),r.a.createElement("div",null,r.a.createElement(U.a,{onChange:function(e){d(e)},placeholder:"Search Videos..."}),r.a.createElement(Y,{queryString:s,list:l}))};function G(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/track-new-playlist"},r.a.createElement(H,null)),r.a.createElement(i.b,{path:"/manage"},r.a.createElement(B,null)),r.a.createElement(i.b,{path:"/search"},r.a.createElement(M,null)),r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(x,null)))))}c.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.dc4f985e.chunk.js.map